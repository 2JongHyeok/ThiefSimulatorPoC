# 🤖 AI CLI 협업 가이드: ThiefSimulator

이 문서는 AI가 **'ThiefSimulator'** 프로젝트의 코드를 생성하고 수정할 때 **반드시 준수**해야 하는 기술적, 아키텍처적, 스타일적 규칙을 정의합니다.

**AI 역할:** 10년 차 시니어 Unity 클라이언트 프로그래머

## 1. 🎯 프로젝트 개요 및 환경 설정

| 항목 | 설정 값 | 비고 |
| :--- | :--- | :--- |
| **프로젝트 이름** | `ThiefSimulator` | 2D 타일 기반 동시 턴제 시뮬레이션 |
| **목표** | 플레이어가 도둑이 되어 집을 터는 게임 완성 | |
| **주요 언어** | **C# (최신 문법)** | |
| **게임 엔진** | **Unity 6 (6000.0.61f1)** | |
| **타깃 플랫폼** | **PC** | |
| **렌더 파이프라인** | URP | (미지정 시 기본값 가정) |

---

## 2. 📜 협업 및 코딩 스타일 규칙 (엄격 준수)

AI가 생성하는 모든 코드는 다음 규칙을 **최우선**으로 준수해야 합니다.

* **1) KISS & YAGNI:** 필수 기능 중심의 **단순**하고 읽기 쉬운 코드만 우선 구현합니다.
* **2) 단일 책임 원칙 (SRP):** **스크립트 1개 = 역할 1개** 원칙을 철저히 지키며, 파일명/클래스명을 명확하게 명시합니다.
* **3) State 패턴:** 플레이어/NPC의 **복잡한 행동**은 **`IState` 인터페이스**와 **`StateMachine`**을 사용하여 분리합니다.
* **4) 통신 방식:** 시스템 간 통신은 직접 참조를 피하고 **C# 이벤트 (`event Action<...>`)** 또는 **UnityEvent**를 사용합니다. (결합도 최소화)
* **5) 데이터 분리:** 튜닝/구성 가능한 데이터는 **ScriptableObject**로 분리하여 인스펙터에서 관리 가능하게 합니다.
* **6) 코드 스타일:**
    * 코드는 항상 **영문**으로 완전하게 제공하며, 간결한 주석을 포함합니다.
    * **Get / Set 프로퍼티**는 캡슐화나 유효성 검사가 필요할 때만 사용하며, 불필요한 단순 접근에는 사용하지 않습니다.
* **7) 모듈성:** **`asmdef`** 파일, **namespace**, **interface**를 적극 활용하여 모듈성 및 유지보수성을 극대화합니다.
* **8) 로그:** 중요한 지점 (초기화, 상태 변경, 실패, I/O)에는 디버깅을 위한 **의미 있는 로그**를 추가합니다.
* **9) Unity 사용법:** 각 스크립트 끝에 **"Unity에서 사용하는 방법 (Usage in Unity)"** 요약을 포함하여 적용 방법을 명시합니다.

---

## 3. ⏱️ 핵심 게임 로직 및 시스템 정의

### 3.1. 시간/턴 시스템 (`TimeManager`)

| 구분 | 규칙 |
| :--- | :--- |
| **시간 흐름 조건** | **오직 플레이어가 이동할 때만** 시간이 흐릅니다. |
| **기본 시간 단위** | 모든 행동은 **`Minutes` (분) 단위**로 처리됩니다. |
| **행동 동시성** | 플레이어 행동으로 소모된 시간만큼, **NPC 행동 (1분당 1 행동)**이 동시에 처리됩니다. (동시 턴) |
| **플레이어 행동** | 행동 지정 후에는 **취소 불가**하며, 모든 행동은 `Command Pattern`으로 설계되어야 합니다. |

### 3.2. 이동 및 상호작용 로직

| 구분 | 규칙 |
| :--- | :--- |
| **이동 방식** | 플레이어의 **타일 클릭** 기반 이동. |
| **이동 비용** | 타일 1개 이동 시 기본 **1분**이 소모되며, 이 비용은 **가변적**으로 변경 가능하게 설계합니다. |
| **상호작용 조건** | **가구 (`Container`)** 바로 앞 타일에 도착해야 상호작용 가능합니다. |
| **아이템 획득** | 인벤토리로 옮기기는 **시간을 소모하지 않습니다.** (단, 가구 클릭 행위 자체도 시간을 소모하지 않음) |

### 3.3. 감지 및 경찰 로직

| 구분 | 규칙 |
| :--- | :--- |
| **감지 범위** | NPC 위치 타일을 중심으로 하는 **5x5 사각형 영역**입니다. |
| **시야 차단** | 감지 로직 구현 시, **벽이나 다른 물체에 의한 시야 차단**을 반드시 고려해야 합니다. |
| **발각 결과** | 감지 범위 내 플레이어가 포착되면 **경찰 출동 (`AlertLevel` 증가)** 로직이 활성화됩니다. 경찰은 플레이어가 재 발각될때마다 점점 증가합니다. 초기 경찰의 수는 4명 입니다. |
| **경찰 행동** | 경찰은 플레이어를 **에워싸는 형태**로 접근하는 알고리즘을 사용합니다. |
| **실패 조건** | 경찰 주변 **1타일** 이내 접근 시 체포. **페널티: 모든 아이템 소실 + 일정 금액 소실.** |

---

## 4. 📝 AI 출력 및 피드백 규칙

* **요청 형식:** 항상 **[모듈]**: [세부 구현 요청] 형식으로 명령을 내릴 것.
    * *예시:* `**TIME_SYSTEM**:` Singleton으로 구현된 TimeManager 클래스를 작성하고 TimeTick 이벤트를 정의해줘.
* **미정 정보 처리:** 필요한 정보가 부족할 경우, 코드를 추정하지 않고 **반드시 사용자에게 질문**하거나 명확한 **`TODO: [질문 내용]`** 주석을 추가합니다.
* **버전 확인:** Unity 버전이 모호하거나 중요한 구현에 영향을 줄 경우, 구현 전에 반드시 먼저 확인 절차를 거칩니다.